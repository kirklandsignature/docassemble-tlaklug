objects: 
  - user: Individual
  - cohabs: DAList.using(object_type=Individual) 
  - family_members: DAList.using(object_type=Individual) 
---
mandatory: true
question: 
    Hello, ${ user }!
subquestion: |
  
  You live with ${ cohabs }
  
  I asked whether you are artistic. You said ${ user.is_artistic }.
  
  Do you like Leonardo da Vinci? ${ user.Likes_Leonardo_da_Vinci }
  
  Do you like Michelangelo? ${ user.Likes_Michelangelo }
  
  Do you like Donatello? ${ user.Likes_Donatello }
  
  Do you like Raphael? ${ user.Likes_Raphael }
  
  Your favourite Art Gallery is ${ user.favourtie_gallery }.
  
  Your signature: ${ user.signature }

attachments:
  - name: Summary of Benefits
    filename: benefits_summary
    content: |
      
      Hello, ${ user }.
      
      % if len(family_members) > 0:
      The family members you told me about are: ${ family_members }.
      
      % for f in family_members:
      
      ${ f } sounds great.
      
      %endfor
      
      I'm a particularly big fan of ${ family_members[0] }. 
      
      % else: 
      You didn't tell me about any family members.
      % endif
       
      % if aid_qualifies:
      I understand you qualify for legal aid.
      % else: 
      I understand you do not qualify for legal aid.
      % endif 
      
       You told me you were born on ${ format_date(birthday, format='EEE, MMMM d, yyyy') }. A good lawyer would write that as ${ format_date(birthday, format="yyyy-MM-dd") }    
---
generic object: Individual
question: |
  What is ${x.object_possessive('name') }?
fields: 
  - first name: x.name.first
  - last name: x.name.last
---
question: Do you live with anyone?
yesno: cohabs.there_are_any
---
question: Do you live with anyone else?
yesno: cohabs.there_is_another
---
question: Are you artistic?
yesno: user.is_artistic
---
question: |
  Which of these artists do you like?
fields: 
  - Leonardo da Vinci: user.Likes_Leonardo_da_Vinci
    datatype: yesnowide 
  - Michelangelo: user.Likes_Michelangelo
    datatype: yesnowide
  - Donatello: user.Likes_Donatello
    datatype: yesnowide
  - Raphael: user.Likes_Raphael
    datatype: yesnowide
---
question: |
  What is your favourite art gallery?
field: user.favourtie_gallery
choices:
  - MET Gallery
  - Art Gallery of Alberta
  - The Louvre
  - The National Gallery (London)
---
question: Please sign
signature: user.signature
---
generic object: Individual
question: |
  What is ${x.object_possessive('name') }?
fields: 
  - first name: x.name.first
  - last name: x.name.last
---
Question: Do you have any family members?
yesno: family_members.there_are_any
---
question: Do you have any additional family members?
yesno: family_members.there_is_another
---
question: Do you qualify for legal aid?
yesno: aid_qualifies
---
question: what is your birthday?
fields:
  - Birthday: birthday
    datatype: date
---